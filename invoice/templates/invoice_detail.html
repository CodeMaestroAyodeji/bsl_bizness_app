{% extends 'base.html' %}

{% block content %}
<div class="container mt-4">
    <h2 class="mb-4" style="color:#3F4448;">Invoice Details - {{ invoice.invoice_number }}</h2>

    <!-- Invoice Information -->
    <div class="card mb-3 shadow-sm rounded-4">
        <div class="card-header" style="background-color:#CABE9F; color:#fff; font-weight:bold;">
            Invoice Information
        </div>
        <div class="card-body">
            <p><strong>Vendor:</strong> {{ invoice.vendor.name }}</p>
            <p><strong>Invoice Date:</strong> {{ invoice.invoice_date|date:"d/m/Y" }}</p>
            <p><strong>Invoice Number:</strong> {{ invoice.invoice_number }}</p>
            <p><strong>Terms:</strong> {{ invoice.terms }}</p>
        </div>
    </div>

    <!-- Invoice Items -->
    <div class="card mb-3 shadow-sm rounded-4">
        <div class="card-header" style="background-color:#CABE9F; color:#fff; font-weight:bold;">
            Invoice Items
        </div>
        <div class="card-body p-0">
            <table class="table table-striped table-hover mb-0">
                <thead class="table-dark">
                    <tr>
                        <th>#</th>
                        <th>Description</th>
                        <th>Quantity</th>
                        <th>Unit Price</th>
                        <th>Discount</th>
                        <th>Tax (7.5%)</th>
                        <th>Net Amount</th>
                    </tr>
                </thead>
                <tbody>
                    {% for item in invoice.items %}
                    <tr>
                        <td>{{ forloop.counter }}</td>
                        <td>{{ item.description }}</td>
                        <td>{{ item.quantity|floatformat:2 }}</td>
                        <td>{{ item.unit_price|floatformat:2 }}</td>
                        <td>{{ item.discount|floatformat:2 }}</td>
                        <td>{% if item.tax %}{{ item.tax_amount|floatformat:2 }}{% else %}0.00{% endif %}</td>
                        <td>{{ item.net_amount|floatformat:2 }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    <!-- Summary -->
    <div class="card mb-4 shadow-sm rounded-4">
        <div class="card-header" style="background-color:#CABE9F; color:#fff; font-weight:bold;">
            Summary
        </div>
        <div class="card-body">
            <p><strong>Sub-total:</strong> {{ invoice.sub_total|floatformat:2 }}</p>
            <p><strong>Total Discount:</strong> {{ invoice.discount_total|floatformat:2 }}</p>
            <p><strong>Total Tax:</strong> {{ invoice.tax_total|floatformat:2 }}</p>
            <h4 style="color:#E6A407;"><strong>Total:</strong> {{ invoice.total|floatformat:2 }}</h4>
            <p><strong>Total in Words:</strong> {{ invoice.total_in_words }}</p>
        </div>
    </div>

    <!-- Actions -->
    <div class="d-flex gap-2 flex-wrap mb-4">
        <a href="{% url 'invoice_list' %}" class="btn btn-secondary">Back to Invoices</a>
        <a href="{% url 'invoice_update' invoice.pk %}" class="btn btn-warning" style="color:#fff;">Edit Invoice</a>
        <a href="{% url 'invoice_delete' invoice.pk %}" class="btn btn-danger">Delete Invoice</a>
        <a href="{% url 'invoice_print_preview' invoice.pk %}" class="btn btn-info" style="color:#fff;">Print Invoice</a>
    </div>
</div>
{% endblock %}
